---
import Layout from '../layouts/Layout.astro';
import { getUltimosProyectos } from '../data/proyectos';
const base = import.meta.env.BASE_URL;
const proyectosRecientes = getUltimosProyectos(3);
---

<Layout title="Cristian Baeza Torres - Antropólogo Físico">
  <div class="min-h-[calc(100vh-16rem)] flex items-center py-8">
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 w-full">
      <!-- Columna Izquierda: Información Personal -->
      <div class="space-y-8">
        <div class="space-y-4">
          <h1 class="text-5xl lg:text-6xl font-bold text-gray-900 leading-tight">Cristian Baeza Torres</h1>
          <p class="text-xl text-gray-600">Antropólogo Físico</p>
          <p class="text-lg text-gray-600">Estudiante Magíster en Ciencia de Datos para la Innovación</p>
          <p class="text-base text-gray-500">Universidad de Concepción - Concepción, Chile</p>
        </div>

        <div class="space-y-4">
          <h2 class="text-2xl font-bold text-gray-900">Sobre mí</h2>
          <div class="space-y-3 text-base text-gray-700 leading-relaxed">
            <p>
              Soy Cristian Baeza Torres, antropólogo físico con especial interés en la aplicación
              de métodos cuantitativos y ciencia de datos en el estudio de poblaciones humanas.
            </p>
            <p>
              Actualmente curso el Magíster en Ciencia de Datos para la Innovación en la Universidad
              de Concepción, donde exploro nuevas formas de integrar Ciencia de datos 
              con mis conocimientos de antropología física.
            </p>
             <p>
              Puedes ver mis proyectos en esta página y contactarme si mi trabajo es de tu interés.
            </p>
          </div>
        </div>

        <div class="space-y-4">
          <h3 class="text-lg font-semibold text-gray-900">Áreas de Experiencia</h3>
          <div class="flex flex-wrap gap-3">
            <span class="bg-blue-100 text-blue-800 px-4 py-2 rounded-full text-base font-medium">Antropología</span>
            <span class="bg-purple-100 text-purple-800 px-4 py-2 rounded-full text-base font-medium">Data Science</span>
            <span class="bg-green-100 text-green-800 px-4 py-2 rounded-full text-base font-medium">Análisis</span>
          </div>
        </div>

        <div class="flex gap-4 pt-4">
          <a href={`${base}/proyectos`} class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition font-medium text-base shadow-md hover:shadow-lg">
            Ver Proyectos
          </a>
          <a href={`${base}/contacto`} class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition font-medium text-base shadow-md hover:shadow-lg">
            Contáctame
          </a>
        </div>
      </div>

      <!-- Columna Derecha: Slider Vertical de Proyectos Recientes -->
      <div class="space-y-4 h-fit">
        <h2 class="text-2xl font-bold text-gray-900">Proyectos Recientes</h2>
        <div class="relative bg-gradient-to-r from-[#2B396D] to-[#0B0B0B] rounded-xl overflow-hidden shadow-xl h-[500px]">
          <div class="carousel-container-vertical relative w-full h-full">
            {proyectosRecientes.map((proyecto, index) => (
              <div 
                class={`carousel-slide-vertical absolute w-full h-full p-8 flex flex-col justify-center text-white transition-opacity duration-500 ${index === 0 ? 'opacity-100' : 'opacity-0'}`}
                id={`vslide${index + 1}`}
              >
                <div class="space-y-4">
                  <h3 class="text-2xl font-bold mb-4">{proyecto.titulo}</h3>
                  <p class="text-gray-200 text-base leading-relaxed">
                    {proyecto.descripcionCorta}
                  </p>
                  <p class="text-base text-gray-300 flex items-center gap-2">
                    <span class="text-2xl">{proyecto.emoji}</span>
                    <span>{proyecto.estado}</span>
                  </p>
                  {proyecto.link && (
                    <a 
                      href={`${base}${proyecto.link}`}
                      class="inline-flex items-center gap-2 bg-white text-blue-900 px-5 py-2.5 rounded-lg hover:bg-gray-100 transition font-medium text-base mt-4"
                    >
                      Ver proyecto
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                      </svg>
                    </a>
                  )}
                </div>
              </div>
            ))}

            <!-- Controles Verticales -->
            <div class="absolute right-6 top-1/2 -translate-y-1/2 flex flex-col gap-3 z-10">
              <button class="carousel-btn-v-prev bg-white/30 hover:bg-white/50 text-white rounded-full w-12 h-12 flex items-center justify-center transition text-lg font-bold">
                ↑
              </button>
              <button class="carousel-btn-v-next bg-white/30 hover:bg-white/50 text-white rounded-full w-12 h-12 flex items-center justify-center transition text-lg font-bold">
                ↓
              </button>
            </div>

            <!-- Indicadores Verticales -->
            <div class="absolute left-6 top-1/2 -translate-y-1/2 flex flex-col gap-3 z-10">
              {proyectosRecientes.map((_, index) => (
                <button 
                  class={`carousel-dot-v w-3.5 h-3.5 bg-white rounded-full cursor-pointer transition ${index === 0 ? 'opacity-100' : 'opacity-50'}`}
                  data-slide={index + 1}
                >
                </button>
              ))}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let currentSlideVertical = 1;
    const totalSlidesVertical = document.querySelectorAll('.carousel-slide-vertical').length;

    function showSlideVertical(n: number) {
      if (n > totalSlidesVertical) currentSlideVertical = 1;
      if (n < 1) currentSlideVertical = totalSlidesVertical;

      // Ocultar todos los slides
      document.querySelectorAll('.carousel-slide-vertical').forEach(slide => {
        slide.classList.remove('opacity-100');
        slide.classList.add('opacity-0');
      });

      // Actualizar indicadores
      document.querySelectorAll('.carousel-dot-v').forEach((dot, index) => {
        if (index + 1 === currentSlideVertical) {
          dot.classList.add('opacity-100');
          dot.classList.remove('opacity-50');
        } else {
          dot.classList.remove('opacity-100');
          dot.classList.add('opacity-50');
        }
      });

      // Mostrar slide actual
      const currentElement = document.getElementById(`vslide${currentSlideVertical}`);
      if (currentElement) {
        currentElement.classList.remove('opacity-0');
        currentElement.classList.add('opacity-100');
      }
    }

    function nextSlideVertical() {
      currentSlideVertical++;
      showSlideVertical(currentSlideVertical);
    }

    function prevSlideVertical() {
      currentSlideVertical--;
      showSlideVertical(currentSlideVertical);
    }

    function goToSlideVertical(n: number) {
      currentSlideVertical = n;
      showSlideVertical(currentSlideVertical);
    }

    // Agregar event listeners cuando el DOM esté listo
    document.addEventListener('DOMContentLoaded', () => {
      // Botón anterior
      const prevBtn = document.querySelector('.carousel-btn-v-prev');
      if (prevBtn) {
        prevBtn.addEventListener('click', prevSlideVertical);
      }

      // Botón siguiente
      const nextBtn = document.querySelector('.carousel-btn-v-next');
      if (nextBtn) {
        nextBtn.addEventListener('click', nextSlideVertical);
      }

      // Indicadores
      document.querySelectorAll('.carousel-dot-v').forEach((dot, index) => {
        dot.addEventListener('click', () => {
          currentSlideVertical = index + 1;
          showSlideVertical(currentSlideVertical);
        });
      });

      // Auto-advance slides every 7 seconds
      setInterval(() => {
        currentSlideVertical++;
        showSlideVertical(currentSlideVertical);
      }, 7000);

      // Inicializar
      showSlideVertical(currentSlideVertical);
    });
  </script>

  <style>
    .carousel-slide-vertical {
      will-change: opacity;
    }
  </style>
</Layout>
